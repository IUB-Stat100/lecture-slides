---
title: "Week 6"
author: "DJM"
date: "18 February 2020"
output:
  xaringan::moon_reader:
    lib_dir: libs
    css: [default, rladies, rladies-fonts, extra.css]
    nature:
      beforeInit: ["macros.js", "https://platform.twitter.com/widgets.js"]
      titleSlideClass: [center,middle, inverse, bigger]
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      ratio: '16:9'
---


# Key ingredients for science

<blockquote cite="NYTimes">...some researchers who specialize in studying diseases that spill over from animals to humans have expressed frustration about conducting discussions about scientific claims without the life breath of science: publicly available data and accounts of how the research was done that have been vetted by other scientists.</blockquote>

.pull-left[.center[.middle[
[Pangolins and Coronavirus](https://www.nytimes.com/2020/02/10/science/pangolin-coronavirus.html?smtyp=cur&smid=fb-nytimes&fbclid=IwAR22kUpILsje8S1NUSFf3uZmBbceVpn80Pw_1np4i_ddeVGjLoBNw1ovMjA)
]]]

.pull-right[
![](https://external-content.duckduckgo.com/iu/?u=http%3A%2F%2Fassets.change.org%2Fphotos%2F1%2Foy%2Fbh%2FYpOYbHKpsizEjfH-1600x900-noPad.jpg%3F1458743431&f=1&nofb=1)
]




---
class: inverse, center, middle

# Weekly concepts (last week)


---

# Weekly concepts (last week)

* Proportionality principle

* Sample space

* Foxy forecasting

* Reproducible research

* Peer review

* Mean vs Median

---

# Today's news

[Return of COVID-19](https://www.nytimes.com/2020/02/13/world/asia/coronavirus-risk-interpreter.html?action=click&module=Top%20Stories&pgtype=Homepage)

---

# Hurricane tracks

.pull-left[
![](https://static01.nyt.com/images/2019/09/04/us/politics/04dc-trumpmap/merlin_160184952_b742ee1f-51f1-4722-8a8a-e52fa895b39e-superJumbo.jpg?quality=90&auto=webp)
]

.pull-right[
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">This was the originally projected path of the Hurricane in its early stages. As you can see, almost all models predicted it to go through Florida also hitting Georgia and Alabama. I accept the Fake News apologies! <a href="https://t.co/0uCT0Qvyo6">pic.twitter.com/0uCT0Qvyo6</a></p>&mdash; Donald J. Trump (@realDonaldTrump) <a href="https://twitter.com/realDonaldTrump/status/1169375550806351872?ref_src=twsrc%5Etfw">September 4, 2019</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
]

---

# All the figures

[Timeseries of paths](https://www.nhc.noaa.gov/archive/2019/DORIAN_graphics.php?product=5day_cone_with_line)


---

# Forecast errors


.center[
![:scale 65%](https://www.nhc.noaa.gov/verification/figs/ALtkerrtrd_sm.jpg)
]

---


# Histogram

```{r, message=FALSE, echo=FALSE, fig.width=12, fig.align='center', fig.height=6}
library(tidyverse)
library(cowplot)
sex = read_csv("data/SexStudy.csv")
ggplot(sex, aes(study.sex)) + 
  geom_histogram(fill="orange", bins=10) +
  theme_cowplot(26) + xlab("probability of sex") +
  scale_y_continuous(expand = expand_scale(0)) +
  scale_x_continuous(expand = expand_scale(0))
```


.green[
Source: Study conducted by George Loewenstein at CMU. Data consists of 64 married couples.
]

---

# In class exercise

* In pairs, 
  1. Guess the average (mean) beer consumption (in ounces) per day in the US
  
  2. Guess the median beer consumption (in ounces) per day in the US
  
  3. Draw a histogram (by hand), with ounces consumed per day on the x-axis and count/frequency on the y-axis. 


--

* Report your best guess for 
  1. ounces of beer .green[YOU] consume per day (average) and 
  
  1. ounces of beer .green[YOUR FRIENDS] consume per day (average)

---

# Wet-biasing

* Evidence in Chapter 4.

* Who is being compared?

* Why does the Weather Channel do something different that the government?

* Is this a good idea?

* Who produces more accurate forecasts?

---

# Power laws

* The "Gutenberg-Richter" is an example of a "power-law" relationship

* What is a power-law relationship?

* What other phenomena have this relationship (approximately or exactly)?

---

# Over-fitting vs. Under-fitting


.pull-left[
* Bias

* Variance

* Complexity and quantity of data

* Bias-Variance tradeoff
]

.pull-right[
```{r,fig.height=12, fig.width=12, echo=FALSE, message=FALSE}
cols = c("blue", "red", "green", "orange")

par(mfrow=c(2,2),bty='n',ann=FALSE,xaxt='n',yaxt='n',family='serif',mar=c(0,0,0,0),oma=c(0,4,4,0))
require(mvtnorm)
mv = matrix(c(0,0,0,0,-.5,-.5,-.5,-.5),4,byrow=T)
va = matrix(c(.01,.01,.5,.5,.05,.05,.5,.5),4,byrow=T)

for(i in 1:4){
  plot(0,0,ylim=c(-2,2),xlim=c(-2,2),pch=19,cex=70,col="blue",ann=FALSE,pty='s')
  points(0,0,pch=19,cex=50,col='white')
  points(0,0,pch=19,cex=30,col="green")
  points(0,0,pch=19,cex=10,col="orange")
  points(rmvnorm(20,mean=mv[i,],sigma=diag(va[i,])), cex=2, pch=19)
  switch(i, 
         '1'= {
           mtext('low variance',3,cex=5)
           mtext('low bias',2,cex=5)
         },
         '2'= mtext('high variance',3,cex=5),
         '3' = mtext('high bias',2,cex=5)
  )
}
```
]

---

# Economic forecasting

<blockquote cite="Signal and the Noise, p. 200">Economic forecasts produced by the White House...have historically been among the least accurate of all.</blockquote>

* (regardless of party)

* Why?

* What are the incentives?

---

# Correlation vs. Causation

<blockquote>From 1967 to 1997, the winner of the Super Bowl (specifically, whether the winner was from the original NFL or the original AFL) was strongly correlated with economic performance for the rest of the year.</blockquote>


--

<blockquote cite="My father in-law, on Monday">Chicago banned guns and has 1105 murders. Maine has no gun restrictions and only 100 murders.</blockquote>

--

* What else is wrong about this statement in terms of other concepts we have discussed?

---

# Graphical model

.pull-left[
```{r, fig.align='center', fig.retina=3, echo=FALSE, message=FALSE}
library(visNetwork)
library(widgetframe)
tnodes = tibble(id=1:2,label=c("guns","crime"), shape="circle")
tedges = tibble(from=1,to=2)
vn = visNetwork(tnodes,tedges) %>%
  visEdges(arrows = "to")
frameWidget(vn, height=400)
```
]


.pull-right[
```{r, fig.align='center', fig.retina=3, echo=FALSE}
tnodes = tibble(id=1:2,label=c("guns","crime"), shape="circle")
tedges = tibble(from=2,to=1)
vn = visNetwork(tnodes,tedges) %>%
  visEdges(arrows = "to")
frameWidget(vn, height=400)
```
]

---

# Graphical model
```{r, fig.align='center', fig.retina=3, echo=FALSE}
tnodes = tibble(id=1:3,label=c("guns","crime","???"), shape="circle")
tedges = tibble(from=c(1,3,3),to=c(2,2,1))
vn = visNetwork(tnodes,tedges) %>%
  visEdges(arrows = "to")
frameWidget(vn, height=400)
```


---

# Today's news


[Chocolate and Cognition](https://www.nejm.org/doi/full/10.1056/NEJMon1211064)


---
class: inverse, center, middle

# Weekly concepts


---

# Weekly concepts

* Forecast horizon

* Forecast uncertainty

* Model averaging

* Mean/Median

* Histogram

* Bias

* Variance

* Over-fitting and Under-fitting

* Power law

* Correlation vs. Causation

* Hidden common causes